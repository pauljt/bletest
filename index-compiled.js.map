{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["function go() {\n  console.log('start')\n  console.log(window.webkit.messageHandlers.bluetooth.postMessage)\n\n  // NOTE: connected to services with IOS & BB8 requires upper-case UUIDS\n  // But the spec seems to require lower case?\n  var BB8 = {\n    name: \"BB-7687\",\n    namePrefix: \"BB-\",\n\n    radioService: \"22BB746F-2BB0-7554-2D6F-726568705327\",\n    radioChar2BB1: \"22BB746F-2BB1-7554-2D6F-726568705327\",\n    radioCharTXPower: \"22BB746F-2BB2-7554-2D6F-726568705327\",\n    radioCharDeepSleep: \"22BB746F-2BB6-7554-2D6F-726568705327\",\n    radioChar2BB8: \"22BB746F-2BB8-7554-2D6F-726568705327\",\n    radioChar2BB9: \"22BB746F-2BB9-7554-2D6F-726568705327\",\n    radioChar2BBA: \"22BB746F-2BBA-7554-2D6F-726568705327\",\n    radioCharAntiDoS: \"22BB746F-2BBD-7554-2D6F-726568705327\",\n    radioCharAntiDoSTimeout: \"22BB746F-2BBE-7554-2D6F-726568705327\",\n    radioCharWake: \"22BB746F-2BBF-7554-2D6F-726568705327\",\n    radioChar3BBA: \"22BB746F-3BBA-7554-2D6F-726568705327\",\n\n    robotService: \"22BB746F-2BA0-7554-2D6F-726568705327\",\n    robotCharControl: \"22BB746F-2BA1-7554-2D6F-726568705327\",\n    robotCharResponse: \"22BB746F-2BA6-7554-2D6F-726568705327\",\n    robotChar2BB7: \"22BB746F-2BB7-7554-2D6F-726568705327\",\n\n    mysteryService: \"00001016-D102-11E1-9B23-00025B00A5A5\",\n    mysteryChar1013: \"00001013-D102-11E1-9B23-00025B00A5A5\",\n    mysteryChar1017: \"00001017-D102-11E1-9B23-00025B00A5A5\",\n    mysteryChar1014: \"00001014-D102-11E1-9B23-00025B00A5A5\",\n\n    deviceService: \"device_information\",\n    deviceCharHarware: \"hardware_revision_string\",\n    deviceCharSerial: \"serial_number_string\",\n    deviceCharModel: \"model_number_string\",\n    deviceCharManufacturer: \"manufacturer_name_string\",\n    deviceCharFirm: \"firmware_revision_string\",\n  };\n\nfunction testBB8() {\n\n  console.log(\"Looking for BB-8.\")\n  // bb-8\n  var options = {\n\n    filters: [{\n      services: ['22BB746F-2BA0-7554-2D6F-726568705327'],\n      name: \"BB-7687\",\n      namePrefix: \"BB-\"\n    }]\n  };\n\n  navigator.bluetooth.requestDevice(options)\n    .then(device => {\n      console.log(\"Device:\", device);\n      return device.gatt.connect();\n    }).then(server => {\n      console.log(\"server:\", server);\n      return server.getPrimaryService(BB8.deviceService)\n    })\n    .then(service => {\n      return Promise.all([\n        service.getCharacteristic(BB8.deviceCharModel).then(handleChar),\n        service.getCharacteristic(BB8.deviceCharManufacturer).then(handleChar)]);\n    }).catch(function (e) {\n    console.log(\"Error:\", e);\n  });\n}\n\n  function testPedometer(){\n    var options = {\n      filters: [{\n        services: ['running_speed_and_cadence'],\n      }]\n    };\n    navigator.bluetooth.requestDevice(options)\n      .then(device => {\n        console.log(\"Device:\", device);\n        return device.gatt.connect();\n      }).then(server => {\n        console.log(\"server:\", server);\n        return server.getPrimaryService('running_speed_and_cadence')\n      })\n      .then(service => {\n        return Promise.all([\n          service.getCharacteristic('serial_number_string').then(handleChar),\n          service.getCharacteristic('rsc_feature').then(handleChar),\n          service.getCharacteristic('rsc_measurement').then(handleChar),\n          service.getCharacteristic('sensor_location').then(handleChar)]);\n      }).catch(function (e) {\n      console.log(\"Error:\", e);\n    });\n\n  }\n}\n\nfunction handleChar(characteristic) {\n  characteristic.readValue()\n    .then(data => {\n      alert(\"Got Char:\" + data);\n    })\n}\n\nwindow.addEventListener('load', function () {\n  document.querySelector(\"#bb8\").addEventListener('click', testBB8)\n  document.querySelector(\"#pedometer\").addEventListener('click', testPedometer)\n});\n\n\n(function () {\n  var old = console.log;\n  var logger = document.getElementById('console');\n  console.log = function (message) {\n    old.log(message);\n    if (typeof message == 'object') {\n      logger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(message) : message) + '\\n';\n    } else {\n      logger.innerHTML += message + '\\n';\n    }\n  }\n})();"]}