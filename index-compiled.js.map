{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;AAAA,SAAS,OAAT,GAAmB;AACjB,MAAI,oBAAJ;;;;AADiB,MAKb,MAAM;AACR,UAAM,SAAN;AACA,gBAAY,KAAZ;;AAEA,kBAAc,sCAAd;AACA,mBAAe,sCAAf;AACA,sBAAkB,sCAAlB;AACA,wBAAoB,sCAApB;AACA,mBAAe,sCAAf;AACA,mBAAe,sCAAf;AACA,mBAAe,sCAAf;AACA,sBAAkB,sCAAlB;AACA,6BAAyB,sCAAzB;AACA,mBAAe,sCAAf;AACA,mBAAe,sCAAf;;AAEA,kBAAc,sCAAd;AACA,sBAAkB,sCAAlB;AACA,uBAAmB,sCAAnB;AACA,mBAAe,sCAAf;;AAEA,oBAAgB,sCAAhB;AACA,qBAAiB,sCAAjB;AACA,qBAAiB,sCAAjB;AACA,qBAAiB,sCAAjB;;AAEA,mBAAe,oBAAf;AACA,uBAAmB,0BAAnB;AACA,sBAAkB,sBAAlB;AACA,qBAAiB,qBAAjB;AACA,4BAAwB,0BAAxB;AACA,oBAAgB,0BAAhB;GA/BE,CALa;;AAuCjB,MAAI,UAAU;;AAEZ,aAAS,CAAC;AACR,gBAAU,CAAC,sCAAD,CAAV;AACA,YAAM,SAAN;AACA,kBAAY,KAAZ;KAHO,CAAT;GAFE,CAvCa;;AAgDjB,YAAU,SAAV,CAAoB,aAApB,CAAkC,OAAlC,EACG,IADH,CACQ,kBAAU;AACd,YAAQ,GAAR,CAAY,SAAZ,EAAuB,MAAvB,EADc;AAEd,WAAO,OAAO,IAAP,CAAY,OAAZ,EAAP,CAFc;GAAV,CADR,CAIK,IAJL,CAIU,kBAAU;AAChB,YAAQ,GAAR,CAAY,SAAZ,EAAuB,MAAvB,EADgB;AAEhB,WAAO,OAAO,iBAAP,CAAyB,IAAI,aAAJ,CAAhC,CAFgB;GAAV,CAJV,CAQG,IARH,CAQQ,mBAAW;AACf,WAAO,QAAQ,GAAR,CAAY,CACjB,QAAQ,iBAAR,CAA0B,IAAI,eAAJ,CAA1B,CAA+C,IAA/C,CAAoD,UAApD,CADiB,EAEjB,QAAQ,iBAAR,CAA0B,IAAI,sBAAJ,CAA1B,CAAsD,IAAtD,CAA2D,UAA3D,CAFiB,CAAZ,CAAP,CADe;GAAX,CARR,CAYK,KAZL,CAYW,UAAU,CAAV,EAAa;AACtB,YAAQ,GAAR,CAAY,CAAZ,EADsB;AAEtB,QAAI,CAAJ,EAFsB;GAAb,CAZX,CAhDiB;CAAnB;;AAkEA,SAAS,aAAT,GAAyB;AACvB,MAAI,0BAAJ,EADuB;AAEvB,MAAI,UAAU;AACZ,aAAS,CAAC;AACR,gBAAU,CAAC,2BAAD,CAAV;KADO,CAAT;GADE,CAFmB;AAOvB,YAAU,SAAV,CAAoB,aAApB,CAAkC,OAAlC,EACG,IADH,CACQ,kBAAU;AACd,QAAI,SAAJ,EAAe,MAAf,EADc;AAEd,QAAK,MAAL,EAFc;AAGd,WAAO,OAAO,IAAP,CAAY,OAAZ,EAAP,CAHc;GAAV,CADR,CAKK,IALL,CAKU,kBAAU;AAChB,QAAI,SAAJ,EAAe,MAAf,EADgB;AAEhB,WAAO,OAAO,iBAAP,CAAyB,2BAAzB,CAAP,CAFgB;GAAV,CALV,CASG,IATH,CASQ,mBAAW;AACf,WAAO,QAAQ,GAAR,CAAY,CACjB,QAAQ,iBAAR,CAA0B,sBAA1B,EAAkD,IAAlD,CAAuD,UAAvD,CADiB,EAEjB,QAAQ,iBAAR,CAA0B,aAA1B,EAAyC,IAAzC,CAA8C,UAA9C,CAFiB,EAGjB,QAAQ,iBAAR,CAA0B,iBAA1B,EAA6C,IAA7C,CAAkD,UAAlD,CAHiB,EAIjB,QAAQ,iBAAR,CAA0B,iBAA1B,EAA6C,IAA7C,CAAkD,UAAlD,CAJiB,CAAZ,CAAP,CADe;GAAX,CATR,CAeK,KAfL,CAeW,UAAU,CAAV,EAAa;AACtB,YAAQ,GAAR,CAAY,CAAZ,EADsB;AAEtB,QAAI,CAAJ,EAFsB;GAAb,CAfX,CAPuB;CAAzB;;AA4BA,SAAS,UAAT,CAAoB,cAApB,EAAoC;AAClC,iBAAe,SAAf,GACG,IADH,CACQ,gBAAQ;AACZ,UAAM,cAAc,IAAd,CAAN,CADY;GAAR,CADR,CADkC;CAApC;;AAOA,OAAO,gBAAP,CAAwB,MAAxB,EAAgC,YAAY;AAC1C,WAAS,aAAT,CAAuB,MAAvB,EAA+B,gBAA/B,CAAgD,OAAhD,EAAyD,OAAzD,EAD0C;AAE1C,WAAS,aAAT,CAAuB,YAAvB,EAAqC,gBAArC,CAAsD,OAAtD,EAA+D,aAA/D,EAF0C;CAAZ,CAAhC;;AAKA,IAAI,MAAM,SAAN,GAAM,CAAS,OAAT,EAAkB;AAC1B,MAAI,SAAS,SAAS,aAAT,CAAuB,UAAvB,CAAT,CADsB;AAE1B,MAAI,QAAO,yDAAP,IAAkB,QAAlB,EAA4B;AAC9B,QAAI;AACF,aAAO,SAAP,IAAoB,CAAC,QAAQ,KAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,OAAf,CAAzB,GAAmD,OAAnD,CAAD,GAA+D,IAA/D,CADlB;KAAJ,CAGA,OAAM,CAAN,EAAQ;AACN,aAAO,SAAP,IAAoB,UAAU,IAAV,CADd;KAAR;GAJF,MAOO;AACL,WAAO,SAAP,IAAoB,UAAU,IAAV,CADf;GAPP;CAFQ","file":"index-compiled.js","sourcesContent":["function testBB8() {\n  log('Starting BB8 test.')\n\n  // NOTE: connected to services with IOS & BB8 requires upper-case UUIDS\n  // But the spec seems to require lower case?\n  var BB8 = {\n    name: \"BB-7687\",\n    namePrefix: \"BB-\",\n\n    radioService: \"22BB746F-2BB0-7554-2D6F-726568705327\",\n    radioChar2BB1: \"22BB746F-2BB1-7554-2D6F-726568705327\",\n    radioCharTXPower: \"22BB746F-2BB2-7554-2D6F-726568705327\",\n    radioCharDeepSleep: \"22BB746F-2BB6-7554-2D6F-726568705327\",\n    radioChar2BB8: \"22BB746F-2BB8-7554-2D6F-726568705327\",\n    radioChar2BB9: \"22BB746F-2BB9-7554-2D6F-726568705327\",\n    radioChar2BBA: \"22BB746F-2BBA-7554-2D6F-726568705327\",\n    radioCharAntiDoS: \"22BB746F-2BBD-7554-2D6F-726568705327\",\n    radioCharAntiDoSTimeout: \"22BB746F-2BBE-7554-2D6F-726568705327\",\n    radioCharWake: \"22BB746F-2BBF-7554-2D6F-726568705327\",\n    radioChar3BBA: \"22BB746F-3BBA-7554-2D6F-726568705327\",\n\n    robotService: \"22BB746F-2BA0-7554-2D6F-726568705327\",\n    robotCharControl: \"22BB746F-2BA1-7554-2D6F-726568705327\",\n    robotCharResponse: \"22BB746F-2BA6-7554-2D6F-726568705327\",\n    robotChar2BB7: \"22BB746F-2BB7-7554-2D6F-726568705327\",\n\n    mysteryService: \"00001016-D102-11E1-9B23-00025B00A5A5\",\n    mysteryChar1013: \"00001013-D102-11E1-9B23-00025B00A5A5\",\n    mysteryChar1017: \"00001017-D102-11E1-9B23-00025B00A5A5\",\n    mysteryChar1014: \"00001014-D102-11E1-9B23-00025B00A5A5\",\n\n    deviceService: \"device_information\",\n    deviceCharHarware: \"hardware_revision_string\",\n    deviceCharSerial: \"serial_number_string\",\n    deviceCharModel: \"model_number_string\",\n    deviceCharManufacturer: \"manufacturer_name_string\",\n    deviceCharFirm: \"firmware_revision_string\",\n  };\n\n  var options = {\n\n    filters: [{\n      services: ['22BB746F-2BA0-7554-2D6F-726568705327'],\n      name: \"BB-7687\",\n      namePrefix: \"BB-\"\n    }]\n  };\n\n  navigator.bluetooth.requestDevice(options)\n    .then(device => {\n      console.log(\"Device:\", device);\n      return device.gatt.connect();\n    }).then(server => {\n      console.log(\"server:\", server);\n      return server.getPrimaryService(BB8.deviceService)\n    })\n    .then(service => {\n      return Promise.all([\n        service.getCharacteristic(BB8.deviceCharModel).then(handleChar),\n        service.getCharacteristic(BB8.deviceCharManufacturer).then(handleChar)]);\n    }).catch(function (e) {\n    console.log(e);\n    log(e)\n  });\n}\n\nfunction testPedometer() {\n  log('Starting Pedometer test.')\n  var options = {\n    filters: [{\n      services: ['running_speed_and_cadence'],\n    }]\n  };\n  navigator.bluetooth.requestDevice(options)\n    .then(device => {\n      log(\"Device:\", device);\n      log (device)\n      return device.gatt.connect();\n    }).then(server => {\n      log(\"server:\", server);\n      return server.getPrimaryService('running_speed_and_cadence')\n    })\n    .then(service => {\n      return Promise.all([\n        service.getCharacteristic('serial_number_string').then(handleChar),\n        service.getCharacteristic('rsc_feature').then(handleChar),\n        service.getCharacteristic('rsc_measurement').then(handleChar),\n        service.getCharacteristic('sensor_location').then(handleChar)]);\n    }).catch(function (e) {\n    console.log(e)\n    log(e);\n  });\n}\n\nfunction handleChar(characteristic) {\n  characteristic.readValue()\n    .then(data => {\n      alert(\"Got Char:\" + data);\n    })\n}\n\nwindow.addEventListener('load', function () {\n  document.querySelector(\"#bb8\").addEventListener('click', testBB8)\n  document.querySelector(\"#pedometer\").addEventListener('click', testPedometer)\n});\n\nvar log = function(message) {\n  var logger = document.querySelector('#console');\n  if (typeof message == 'object') {\n    try {\n      logger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(message) : message) + '\\n';\n    }\n    catch(e){\n      logger.innerHTML += message + '\\n';\n    }\n  } else {\n    logger.innerHTML += message + '\\n';\n  }\n}\n\n/*\n(function() {\n  var exLog = log;\n  log = function(message) {\n    var logger = document.querySelector('#console');\n    exLog.apply(this, arguments);\n    if (typeof message == 'object') {\n      logger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(message) : message) + '\\n';\n    } else {\n      logger.innerHTML += message + '\\n';\n    }\n  }\n})()*/"]}